@model LAPS.SJK.UI.Models.TemplateModel

@{
    ViewBag.Title = "Preview";
    Layout = "~/Views/Shared/_Admin.cshtml";
    List<long> rowIndexList = Model.values != null ? Model.values.Select(t => t.row_index).Distinct().ToList() : new List<long>();
}


<div id="page-title">
    <h2>review Table @Model.template_name</h2>
    <p>review Table @Model.remark</p>

</div>
<div class="panel">
    <div class="panel-body">
        <h3 class="title-hero">
            Preview Table @Model.template_name
        </h3>
        <div class="example-box-wrapper">
            <table id="datatable-responsive" class="table table-striped table-bordered responsive no-wrap" cellspacing="0" width="100%">
                <thead>
                    <tr>
                        <th>
                            No
                        </th>
                        @foreach (var field in Model.fields)
                        {
                            <th>
                                @Html.DisplayName(field.column_alias)
                            </th>
                        }
                        <th>

                        </th>
                    </tr>
                </thead>
                <tfoot>
                    <tr>
                        <th>
                            No
                        </th>
                        @foreach (var field in Model.fields)
                        {
                            <th>
                                @Html.DisplayName(field.column_alias)
                            </th>
                        }
                        <th>

                        </th>
                    </tr>
                </tfoot>
                <tbody>

                    @for (int i = 0; i < rowIndexList.Count; i++)
                    {
                        <tr>
                            <td>
                                @string.Format("{0}", rowIndexList[i])
                            </td>
                            @foreach (var field in Model.fields)
                            {
                                var value = Model.values.Where(t => t.id_template == field.id_template && t.id_field == field.id && t.row_index == rowIndexList[i]).FirstOrDefault();
                                <td>
                                    @Html.DisplayName(value != null ? value.value_field : string.Empty)
                                </td>
                            }
                            <td>
                                @Html.ActionLink("Edit", "EditValue", new { id = Model.id, row_index = rowIndexList[i] }) | @Html.ActionLink("Delete", "DeleteValue", new { id = Model.id, row_index = rowIndexList[i] }, new { onclick = "return confirm('Are you sure you wish to delete this?');" })

                            </td>
                        </tr>
                    }
                </tbody>
            </table>

            <div class="form-group">
                <div class="bg-default content-box text-center pad20A mrg25T">
                    @Html.ActionLink("Kembali", "Edit", new { id = Model.id }, new { @class = "btn btn-primary" })
                    @Html.ActionLink("New Data", "AddValue", new { id = Model.id }, new { @class = "btn btn-primary" })

                </div>
            </div>
        </div>
    </div>
</div>
